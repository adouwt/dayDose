### https
**http + ssl（secure socket layer）**

#### http的缺点
- 通信使用明文，没有加密，信息容易被窃取
- 不验证通信方的身份，对方容易被伪装
- 无法证明报文的完整性，是否被篡改无法得知

#### https如何解决这些问题
http + 加密 + 查明对方身份（证书）+ 完整性保护  = https

加密： 对称加密（共享加密）和非对成加密（公开加密），非对称加密方式，有一个私钥和一个共钥
证书： CA
完整性： SSL

非对成加密（公开加密）： 交换密钥时候
对称加密（共享加密）： 交换报文阶段

通信过程介绍：
    1、浏览器厂商会事先植入常用CA认证机构的公开密钥，简称公钥；   
    2、浏览器在访问网站时候，网站会将网站的公钥证书（网站会向数字证书认证机构申请共钥匙，数字机构会对共钥进行数字签名，把数字签名和有数字签名的共钥，一同发给客户端）发给客户端；   
    3、浏览器客户端有事先已经准备的共钥，利用这个共钥对服务端发来的数字证书进行验证（主要是对签名的验证），验证出来的签名和服务端发来的签名对比验证    
    4、使用服务器发来的共钥对报文进行加密   
    5、服务器用私钥对报文解密   


- 1、（ssl通信阶段），客户端发送ClientHello给服务器，报文中包含：ssl的支持版本，加密组件（Cipher Suite）列表（所使用的加密算法和密钥长度）；
- 2、服务器会以ServerHello 作为报文应答，报文包含： ssl的支持版本，加密组件（来自客户端加密组件内筛选内容）；
- 3、服务器发送Certificate 报文，报文总包含公开密钥证书；
- 4、最后服务器发送serverHelloDone报文通知客户端，最初阶段的ssl握手协商部分结束
- 5、客户端发送报文ClientKeyExchange作为回应，报文包含一个pre-master secret的随机密码串。该报文，已经被服务器发来的公钥加密；
- 6、客户端继续发送Change Cipher Spec 报文，该报文提示服务器之后的通信会采用 pre-master secret密钥加密；
- 7、客户端发送finshed 结束报文。该报文包含：链接至今的全部报文的整体校验值;服务端用私钥去解密改报文；
- 8、服务器同样发送Change Cipher Spec 报文；
- 9、服务器发送finished结束报文；
- 10、服务器和客户端的finished 报文交换完毕，ssl链接完成，将进行http通讯；
- 11、应用层协议通信，发送http请求；
- 12、服务器响应http请求
- 13、客户端发送close_notify断开链接，
- 14、客户端发送TCP FIN 报文来关闭TCP的通信